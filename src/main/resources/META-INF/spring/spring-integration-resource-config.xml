<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jms="http://www.springframework.org/schema/integration/jms"
       xmlns:int="http://www.springframework.org/schema/integration"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
            http://www.springframework.org/schema/integration/jms http://www.springframework.org/schema/integration/jms/spring-integration-jms.xsd">

    <!-- external queue for receiving resources to be processed by the messaging service -->
    <bean id="resourceJMSQueue" class="org.apache.activemq.command.ActiveMQQueue">
        <constructor-arg value="hspc.messaging.processresource.queue" />
    </bean>

    <!-- connect the resourceJMSQueue to the resourceChannel -->
    <jms:message-driven-channel-adapter
            id="resourceJMSAdapater"
            destination="resourceJMSQueue"
            connection-factory="jmsConnectionFactory"
            channel="resourceChannel"
            />

    <!-- messaging channel to receive resources -->
    <int:channel id="resourceChannel">
        <int:interceptors>
            <int:wire-tap channel="resourceChannelLogger"/>
        </int:interceptors>
    </int:channel>

    <int:service-activator
            id="submitResourceServiceActivator"
            input-channel="resourceChannel"
            ref="droolsSubscriptionAdapter"
            method="submitResource"
            />

    <int:logging-channel-adapter
            id="resourceChannelLogger"
            level="INFO"
            logger-name="ResourceChannel"
            log-full-message="true"
            />
</beans>